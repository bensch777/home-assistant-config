'1593959264717':
  alias: Leaving the house
  sequence:
    - service: script.turn_off_everything
turn_off_everything:
  alias: Turn off everything
  sequence:
    - entity_id: media_player.living_room
      service: media_player.media_stop
    - entity_id: all
      service: light.turn_off
    - entity_id: media_player.living_room_2
      service: media_player.media_stop
    - entity_id: media_player.schlafzimmer
      service: media_player.media_stop
    - entity_id: media_player.spotify
      service: media_player.media_stop
    - entity_id: media_player.sony_bravia_tv
      service: media_player.turn_off
arriving:
  alias: Arriving home
  sequence:
    - service: script.cozy_lights_kitchen
    - service: media_player.select_source
      data_template:
        entity_id: media_player.living_room
        source: Radio Hamburg
    - service: media_player.volume_set
      data_template:
        entity_id: media_player.living_room
        volume_level: 0.1
    - service: media_player.play_media
      data_template:
        entity_id: media_player.living_room
cozy_lights_kitchen:
  alias: 'Kitchen & Livingroom: Set cozy lights'
  sequence:
    - data:
        brightness_pct: 25
        entity_id: light.kuchenbeleuchtung
      service: light.turn_on
    - service: light.turn_on
      data:
        brightness_pct: 25
        entity_id: light.wohnzimmerbeleuchtung
  mode: single
play_spotify:
  alias: Play music from Spotify
  fields:
    source:
      description: Which source to use on the speakers
      example: Wifi
    playlist:
      description: Which playlist to use on the speakers
      example: 37i9dQZF1DWSWyJydK4fTU
  sequence:
    - data_template:
        entity_id: media_player.spotify
        source: '{{ source }}'
      service: media_player.select_source
    - data:
        shuffle: true
      entity_id: media_player.spotify
      service: media_player.shuffle_set
    - data_template:
        entity_id: media_player.spotify
        volume_level: 0.1
      service: media_player.volume_set
    - data_template:
        entity_id: media_player.spotify
        media_content_id: spotify:playlist:{{ playlist }}
        media_content_type: playlist
      service: media_player.play_media
increase_brightness:
  alias: Increase the brightness of a group of lights
  fields:
    group:
      description: The group to apply the light increase to.
      example: light.living_room_lights
  sequence:
    - service: light.turn_on
      data_template:
        entity_id: '{{ group }}'
        brightness: "{% set b = state_attr(group, 'brightness') %} {% if b == None %}\n\
        \  10\n{% elif b < 20 %}\n  128\n{% elif b < 140 %}\n  255\n{% else %}\n \
        \ 10\n{% endif %}\n"
kitchen_and_livingroom_working_lights:
  alias: 'Kitchen & Livingroom: Working Lights'
  sequence:
    - service: light.turn_on
      data:
        entity_id:
          - light.wohnzimmerbeleuchtung
        color_temp: 366
        brightness_pct: 65
    - service: light.turn_on
      data:
        entity_id:
          - light.kuchenbeleuchtung
        color_temp: 366
        brightness_pct: 35
  mode: parallel
  max: 10
